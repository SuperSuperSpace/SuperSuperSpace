---
title: OpenCV实现试管缺陷识别
date: 2018-6-1 11:12:00
tags: OpenCV
---

---
试管定位思路流程：
> 1、获取原图像，通过亮度，对比度，颜色空间转换等图像预处理，获得边缘明显的试管图像
> 2、通过边缘查找函数，找出图像中所有边缘
> 3、设置边缘面积范围条件，通过遍历筛选出符合试管面积的轮廓
> 4、找到这些试管轮廓的凸包
> 5、得到凸包形成的外矩形
> 6、至此试管的大致位置便可以确认了

试管长短判断：
> 1、根据前面工作获取的试管外矩形，可以很容易提取出外矩形的高度（试管在摄像头成像里是竖着放的）
> 2、根据试管大概的长度，设置一个合适的范围
> 3、对不在该范围内的试管进行标记

试管口缺陷判断：
> 1、通过膨胀操作加强裂痕高亮部分
> 2、选取包含试管口四周的区域，算出其平均像素值
> 3、与标准像素值进行比较，对不符合的试管进行标记
> 4、目前试管口缺陷检测健壮性较差，对缺陷裂痕在中间位置检测效果较好，但如果在侧边的话，效果很不理想

更新：目前试管口缺陷在边缘处也可检测到，主要思路还是计算平均像素值，但是加入了极值像素值剔除条件。目前能初步检测但需要检测需要特定环境


<br><br>

## [点击下载项目](/download/tube_recognition.zip)

---